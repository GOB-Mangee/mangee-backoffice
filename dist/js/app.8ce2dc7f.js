(function(t){function e(e){for(var n,i,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,r=1;r<s.length;r++){var l=s[r];0!==o[l]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=s[0]))}return t}var n={},o={app:0},a=[];function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=n,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var n=s("8a23"),o=s.n(n);o.a},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[t.isLoggedIn?s("div",[s("Navigation"),s("Toolbar"),s("v-content",{attrs:{id:"main-content"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("router-view")],1)])])])],1):s("Login")],1)},a=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sidebar-menu",{attrs:{menu:t.menu}})},r=[],l=s("4776"),c=s.n(l),u={components:{SidebarMenu:l["SidebarMenu"]},data:function(){return{menu:[{header:!0,title:"Main Navigation",hiddenOnCollapse:!0},{href:"/",title:"Home",icon:"fa fa-home"},{href:"/recipes",title:"Recipes",icon:"fa fa-book",child:[{href:"/validateRecipe",title:"Validate Recipe",icon:"fa fa-check"},{href:"/addRecipe",title:"Add Recipe",icon:"fa fa-plus"}]},{href:"/ingredients",title:"Ingredients",icon:"fa fa-apple",child:[{href:"/validateIngredient",title:"Validate Ingredient",icon:"fa fa-check"},{href:"/addIngredient",title:"Add Ingredient",icon:"fa fa-plus"}]},{href:"/exportData",title:"Export Data",icon:"fa fa-database"}]}}},d=u,p=s("2877"),m=Object(p["a"])(d,i,r,!1,null,null,null),f=m.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-app-bar",{attrs:{color:"dark accent-4",dense:"",dark:""}},[s("v-spacer"),s("v-toolbar-title",[t._v(t._s(t.$route.name))]),s("v-spacer"),s("v-btn",{attrs:{icon:""}},[s("v-icon",{on:{click:function(e){return t.logout()}}},[t._v("mdi-exit-to-app")])],1)],1)],1)},v=[],h={name:"Toolbar",methods:{logout:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.push("/login")}))}}},b=h,y=s("6544"),_=s.n(y),k=s("40dc"),w=s("8336"),C=s("132d"),x=s("2fa4"),I=s("2a7f"),S=Object(p["a"])(b,g,v,!1,null,null,null),T=S.exports;_()(S,{VAppBar:k["a"],VBtn:w["a"],VIcon:C["a"],VSpacer:x["a"],VToolbarTitle:I["a"]});var P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("v-app",{attrs:{id:"inspire"}},[s("h1",[t._v("Welcome to Project Piteu Backoffice")]),s("v-app",{attrs:{id:"inspire"}},[s("v-content",[s("v-container",{attrs:{fluid:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[s("v-card",{staticClass:"elevation-12"},[s("v-toolbar",{attrs:{color:"#fdc718",dark:"",flat:""}},[s("v-toolbar-title",[t._v("Login")]),s("v-spacer")],1),s("v-card-text",[s("v-form",[s("v-text-field",{attrs:{label:"Email","prepend-icon":"mdi-account",type:"text"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("v-text-field",{attrs:{id:"password",label:"Password","prepend-icon":"mdi-lock",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"primary"},on:{click:t.login}},[t._v("Login")])],1),t.err?s("p",[t._v(t._s(t.err))]):t._e()],1)],1)],1)],1)],1)],1)],1)],1)},A=[],O={data:function(){return{email:"",password:"",err:null}},methods:{appendScript:function(t){var e=document.createElement("script");e.setAttribute("src",t),document.head.this.appendChild(e)},login:function(){var t=this,e=this.email,s=this.password;this.$store.dispatch("login",{email:e,password:s}).then((function(){return t.$router.push("/")})).catch((function(e){console.log(e),t.err=e}))}}},z=O,D=s("7496"),$=s("b0af"),V=s("99d9"),j=s("62ad"),E=s("a523"),R=s("a75b"),B=s("4bd4"),N=s("0fd9"),L=s("8654"),q=s("71d9"),F=Object(p["a"])(z,P,A,!1,null,null,null),M=F.exports;_()(F,{VApp:D["a"],VBtn:w["a"],VCard:$["a"],VCardActions:V["a"],VCardText:V["c"],VCol:j["a"],VContainer:E["a"],VContent:R["a"],VForm:B["a"],VRow:N["a"],VSpacer:x["a"],VTextField:L["a"],VToolbar:q["a"],VToolbarTitle:I["a"]});var H={name:"App",components:{Navigation:f,Toolbar:T,Login:M},data:function(){return{}},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}}},U=H,J=(s("034f"),Object(p["a"])(U,o,a,!1,null,null,null)),W=J.exports;_()(J,{VApp:D["a"],VContent:R["a"]});var G=s("8c4f"),K=s("f309");n["default"].use(K["a"]);var Q=new K["a"]({}),X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-3 col-md-6 col-sm-6"},[s("v-card",[s("v-card-title",[t._v(" Recipes ")]),s("v-card-subtitle",[t._v(" Total ")]),s("v-card-text",[t.stats?s("h3",{staticClass:"card-title"},[t._v(t._s(t.stats.totalRecipes))]):t._e()])],1)],1),s("div",{staticClass:"col-lg-3 col-md-6 col-sm-6"},[s("v-card",[s("v-card-title",[t._v(" Non Validated Recipes ")]),s("v-card-subtitle",[t._v(" Total ")]),s("v-card-text",[t.stats?s("h3",{staticClass:"card-title"},[t._v(t._s(t.stats.totalRecipesToBeValidated))]):t._e()])],1)],1)])])])},Y=[],Z=s("bc3a"),tt=s.n(Z),et={name:"Recipes",data:function(){return{deploy_to:"https://projectpiteu.herokuapp.com/",stats:null}},mounted:function(){var t=this,e=this.deploy_to+"backoffice/stats/recipe/";tt.a.get(e,{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(e){t.stats=e.data})).catch((function(t){console.log(t)}))}},st=et,nt=Object(p["a"])(st,X,Y,!1,null,"37e252e5",null),ot=nt.exports;_()(nt,{VCard:$["a"],VCardSubtitle:V["b"],VCardText:V["c"],VCardTitle:V["d"]});var at=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},it=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",[t._v("Here is some information. This is the home page")])])}],rt={name:"Home"},lt=rt,ct=Object(p["a"])(lt,at,it,!1,null,null,null),ut=ct.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("button",{staticClass:"btn btn-info",on:{click:function(e){return t.downloadDb()}}},[t._v("Export db")])])},pt=[],mt=(s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),{name:"ExportData",methods:{downloadDb:function(){var t=this;tt()({method:"get",headers:{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}},url:"https://projectpiteu.herokuapp.com/exportdb",responseType:"arraybuffer"}).then((function(e){t.forceFileDownload(e,"db-backup.json")})).catch((function(){return console.log("error occuredhttps://projectpiteu.herokuapp.com/exportdb")}))},forceFileDownload:function(t,e){var s=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=s,n.setAttribute("download",e),document.body.appendChild(n),n.click()}}}),ft=mt,gt=Object(p["a"])(ft,dt,pt,!1,null,"43478fb4",null),vt=gt.exports,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Sort","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"sortBySelect"}},[s("b-input-group",{attrs:{size:"sm"}},[s("b-form-select",{staticClass:"w-75",attrs:{id:"sortBySelect",options:t.sortOptions},scopedSlots:t._u([{key:"first",fn:function(){return[s("option",{attrs:{value:""}},[t._v("-- none --")])]},proxy:!0}]),model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}}),s("b-form-select",{staticClass:"w-25",attrs:{size:"sm",disabled:!t.sortBy},model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}},[s("option",{domProps:{value:!1}},[t._v("Asc")]),s("option",{domProps:{value:!0}},[t._v("Desc")])])],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Initial sort","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"initialSortSelect"}},[s("b-form-select",{attrs:{id:"initialSortSelect",size:"sm",options:["asc","desc","last"]},model:{value:t.sortDirection,callback:function(e){t.sortDirection=e},expression:"sortDirection"}})],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"filterInput"}},[s("b-input-group",{attrs:{size:"sm"}},[s("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),s("b-input-group-append",[s("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter On","label-cols-sm":"3","label-align-sm":"right","label-size":"sm",description:"Leave all unchecked to filter on all data"}},[s("b-form-checkbox-group",{staticClass:"mt-1",model:{value:t.filterOn,callback:function(e){t.filterOn=e},expression:"filterOn"}},[s("b-form-checkbox",{attrs:{value:"id"}},[t._v("Id")]),s("b-form-checkbox",{attrs:{value:"validated"}},[t._v("Valid")])],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm","label-for":"perPageSelect"}},[s("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),s("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1),this.success?s("b-alert",{attrs:{variant:"success",show:""}},[t._v(t._s(this.success))]):t._e(),this.err?s("b-alert",{attrs:{variant:"danger",show:""}},[t._v(t._s(this.err))]):t._e(),s("b-table",{attrs:{"show-empty":"",small:"",stacked:"md",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,filterIncludedFields:t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[t._v(" "+t._s(e.value.first)+" "+t._s(e.value.last)+" ")]}},{key:"cell(actions)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{variant:"warning",size:"sm"},on:{click:function(s){return t.info(e.item)}}},[t._v(" Edit ")]),s("b-button",{attrs:{variant:"outline-primary",size:"sm"},on:{click:e.toggleDetails}},[t._v(" "+t._s(e.detailsShowing?"Hide":"Show")+" Details ")])]}},{key:"row-details",fn:function(e){return[s("b-card",[s("ul",t._l(e.item,(function(e,n){return s("li",{key:n},[t._v(t._s(n)+": "+t._s(e))])})),0)])]}}])}),s("b-modal",{on:{ok:t.handleSubmit},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.recipe?s("div",[s("pre",[t._v(t._s(t.recipe))]),s("b-row",{staticClass:"mb-1"},[s("b-col",{attrs:{cols:"3"}},[t._v("Cuisine")]),s("b-col",[s("b-form-select",{attrs:{options:t.cuisinesAsOptions},on:{change:t.setCuisine},model:{value:t.selectedCuisine,callback:function(e){t.selectedCuisine=e},expression:"selectedCuisine"}})],1)],1),s("b-row",{staticClass:"mb-1"},[s("b-col",[s("b-button",{directives:[{name:"show",rawName:"v-show",value:t.recipe.validated,expression:"recipe.validated"}],attrs:{variant:"danger"},on:{click:function(e){t.recipe.validated=!1}}},[t._v("Invalidate Recipe")]),s("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.recipe.validated,expression:"!recipe.validated"}],attrs:{variant:"success"},on:{click:function(e){t.recipe.validated=!0}}},[t._v("Validate Recipe")])],1)],1)],1):t._e()])],1)],1)},bt=[],yt=(s("4de4"),s("d81d"),s("b0c0"),{data:function(){return{err:null,success:null,deploy_to:"https://projectpiteu.herokuapp.com/",items:[],show:!1,recipe:null,cuisinesAsOptions:[],cuisines:[],selectedCuisine:"",fields:[{key:"id",label:"Recipe Id",sortable:!0,class:"text-center"},{key:"validated",label:"Valid",sortable:!0,class:"text-center"},{key:"actions",label:"Actions"}],totalRows:1,currentPage:1,perPage:10,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[]}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},mounted:function(){var t=this;tt.a.get(this.deploy_to+"backoffice/recipes/",{headers:{Authorization:"".concat(this.$store.getters.getTokenToSend)}}).then((function(e){t.items=e.data,t.totalRows=t.items.length})).catch((function(t){console.log(t)})),tt.a.get(this.deploy_to+"cuisine/",{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(e){t.cuisines=e.data.results;for(var s=0;s<t.cuisines.length;s++)t.cuisinesAsOptions.push({value:t.cuisines[s],text:t.cuisines[s].name})})).catch((function(e){t.showErr(e),console.log(e)}))},methods:{info:function(t){var e=this;tt.a.get(this.deploy_to+"backoffice/recipe/"+t.id+"/",{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(t){e.recipe=t.data,e.selectedCuisine={value:e.recipe.cuisine,text:e.recipe.cuisine.name},e.show=!0})).catch((function(t){e.showErr(t),console.log(t)}))},showErr:function(t){var e=this;this.err=t,setTimeout((function(){return e.err=null}),3e3)},showSuccess:function(t){var e=this;this.success=t,setTimeout((function(){return e.success=null}),3e3)},setCuisine:function(){this.recipe.cuisine=this.selectedCuisine},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},handleSubmit:function(){var t=this;tt.a.post(this.deploy_to+"backoffice/edit/recipe/"+this.recipe.id+"/",this.recipe,{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(e){t.showSuccess("status "+e.status),console.log(e)})).catch((function(e){t.showErr(e),console.log(e)}))}}}),_t=yt,kt=Object(p["a"])(_t,ht,bt,!1,null,null,null),wt=kt.exports,Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-3 col-md-6 col-sm-6"},[s("v-card",[s("v-card-title",[t._v(" Ingredients ")]),s("v-card-subtitle",[t._v(" Total ")]),s("v-card-text",[t.stats?s("h3",{staticClass:"card-title"},[t._v(t._s(t.stats.totalIngredients))]):t._e()])],1)],1),s("div",{staticClass:"col-lg-3 col-md-6 col-sm-6"},[s("v-card",[s("v-card-title",[t._v(" Non Validated Ingredients ")]),s("v-card-subtitle",[t._v(" Total ")]),s("v-card-text",[t.stats?s("h3",{staticClass:"card-title"},[t._v(t._s(t.stats.totalIngredientsToBeValidated))]):t._e()])],1)],1)])])])},xt=[],It={name:"Recipes",data:function(){return{deploy_to:"https://projectpiteu.herokuapp.com/",stats:null}},mounted:function(){var t=this,e=this.deploy_to+"backoffice/stats/ingredient/";tt.a.get(e,{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(e){t.stats=e.data})).catch((function(t){console.log(t)}))}},St=It,Tt=Object(p["a"])(St,Ct,xt,!1,null,"04658f92",null),Pt=Tt.exports;_()(Tt,{VCard:$["a"],VCardSubtitle:V["b"],VCardText:V["c"],VCardTitle:V["d"]});var At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Sort","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"sortBySelect"}},[s("b-input-group",{attrs:{size:"sm"}},[s("b-form-select",{staticClass:"w-75",attrs:{id:"sortBySelect",options:t.sortOptions},scopedSlots:t._u([{key:"first",fn:function(){return[s("option",{attrs:{value:""}},[t._v("-- none --")])]},proxy:!0}]),model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}}),s("b-form-select",{staticClass:"w-25",attrs:{size:"sm",disabled:!t.sortBy},model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}},[s("option",{domProps:{value:!1}},[t._v("Asc")]),s("option",{domProps:{value:!0}},[t._v("Desc")])])],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Initial sort","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"initialSortSelect"}},[s("b-form-select",{attrs:{id:"initialSortSelect",size:"sm",options:["asc","desc","last"]},model:{value:t.sortDirection,callback:function(e){t.sortDirection=e},expression:"sortDirection"}})],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"filterInput"}},[s("b-input-group",{attrs:{size:"sm"}},[s("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),s("b-input-group-append",[s("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter On","label-cols-sm":"3","label-align-sm":"right","label-size":"sm",description:"Leave all unchecked to filter on all data"}},[s("b-form-checkbox-group",{staticClass:"mt-1",model:{value:t.filterOn,callback:function(e){t.filterOn=e},expression:"filterOn"}},[s("b-form-checkbox",{attrs:{value:"id"}},[t._v("Id")]),s("b-form-checkbox",{attrs:{value:"category"}},[t._v("Category")])],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm","label-for":"perPageSelect"}},[s("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),s("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1),this.success?s("b-alert",{attrs:{variant:"success",show:""}},[t._v(t._s(this.success))]):t._e(),this.err?s("b-alert",{attrs:{variant:"danger",show:""}},[t._v(t._s(this.err))]):t._e(),s("b-table",{attrs:{"show-empty":"",small:"",stacked:"md",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,filterIncludedFields:t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[t._v(" "+t._s(e.value.first)+" "+t._s(e.value.last)+" ")]}},{key:"cell(actions)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{variant:"warning",size:"sm"},on:{click:function(s){return t.info(e.item)}}},[t._v(" Edit ")]),s("b-button",{attrs:{variant:"outline-primary",size:"sm"},on:{click:e.toggleDetails}},[t._v(" "+t._s(e.detailsShowing?"Hide":"Show")+" Details ")])]}},{key:"row-details",fn:function(e){return[s("b-card",[s("ul",t._l(e.item,(function(e,n){return s("li",{key:n},[t._v(t._s(n)+": "+t._s(e))])})),0)])]}}])}),s("b-modal",{on:{ok:t.handleSubmit},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.editedIngredient?s("div",[s("pre",[t._v(t._s(t.editedIngredient))]),s("b-row",{staticClass:"mb-1"},[s("b-col",{attrs:{cols:"3"}},[t._v("Category")]),s("b-col",[s("b-form-select",{attrs:{options:t.categoriesAsOptions},on:{change:t.setCategory},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}})],1)],1)],1):t._e()])],1)],1)},Ot=[],zt={data:function(){return{err:null,success:null,deploy_to:"https://projectpiteu.herokuapp.com/",items:[],show:!1,ingredient:null,editedIngredient:null,categoriesAsOptions:[],categories:[],selectedCategory:"",fields:[{key:"id",label:"Ingredient Id",sortable:!0,class:"text-center"},{key:"category.name",label:"Category",sortable:!0,class:"text-center"},{key:"actions",label:"Actions"}],totalRows:1,currentPage:1,perPage:10,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[]}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},mounted:function(){var t=this;tt.a.get(this.deploy_to+"backoffice/ingredients/",{headers:{Authorization:"".concat(this.$store.getters.getTokenToSend)}}).then((function(e){t.items=e.data,t.totalRows=t.items.length})).catch((function(e){t.showErr(e),console.log(e)})),tt.a.get(this.deploy_to+"category/",{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(e){t.categories=e.data.results;for(var s=0;s<t.categories.length;s++)t.categoriesAsOptions.push({value:t.categories[s],text:t.categories[s].name})})).catch((function(e){t.showErr(e),console.log(e)}))},methods:{info:function(t){this.editedIngredient=t,this.selectedCategory={value:this.editedIngredient.category,text:this.editedIngredient.category.name},this.show=!0},showErr:function(t){var e=this;this.err=t,setTimeout((function(){return e.err=null}),3e3)},showSuccess:function(t){var e=this;this.success=t,setTimeout((function(){return e.success=null}),3e3)},setCategory:function(){this.editedIngredient.category=this.selectedCategory},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},handleSubmit:function(){var t=this;this.ingredient=this.editedIngredient,tt.a.post(this.deploy_to+"backoffice/edit/ingredient/"+this.ingredient.id+"/",this.ingredient,{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(e){t.showSuccess("Success"),console.log(e)})).catch((function(e){t.showErr(e),console.log(e.status)}))}}},Dt=zt,$t=Object(p["a"])(Dt,At,Ot,!1,null,null,null),Vt=$t.exports,jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[this.success?s("b-alert",{attrs:{variant:"success",show:""}},[t._v(t._s(this.success))]):t._e(),this.err?s("b-alert",{attrs:{variant:"danger",show:""}},[t._v(t._s(this.err))]):t._e(),s("form",{ref:"ingredientForm",on:{submit:function(e){return e.preventDefault(),t.submitIngredient(e)}}},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentIngredient.name,expression:"currentIngredient.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.currentIngredient.name},on:{input:function(e){e.target.composing||t.$set(t.currentIngredient,"name",e.target.value)}}})]),s("div",{attrs:{id:"imagePreview",align:"center"}},[t.currentIngredient.img?s("v-img",{attrs:{src:t.currentIngredient.img,alt:"",contain:"",height:"400px",width:"450px"}}):t._e()],1),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentIngredient.img,expression:"currentIngredient.img"}],staticClass:"form-control",attrs:{type:"text",id:"imgURL",placeholder:"Image URL"},domProps:{value:t.currentIngredient.img},on:{input:function(e){e.target.composing||t.$set(t.currentIngredient,"img",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.currentIngredient.category,expression:"currentIngredient.category"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.currentIngredient,"category",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Select a category...")]),t._l(t.categories,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")])])],1)},Et=[],Rt=(s("ac1f"),s("5319"),s("b85c")),Bt={name:"AddIngredients",data:function(){return{deploy_to:"https://projectpiteu.herokuapp.com/",err:null,success:null,valid:!1,currentIngredient:{name:"",img:"https://simpleveganblog.com/wp-content/uploads/2021/01/Soy-Milk-2.jpg",category:void 0},categories:[],ourIngredients:[],fetchedIngredients:[]}},methods:{showErr:function(t){var e=this;this.err=t,setTimeout((function(){return e.err=null}),3e3)},showSuccess:function(t){var e=this;this.success=t,setTimeout((function(){return e.success=null}),3e3)},ingredientNameNormalization:function(t){return t.toLowerCase().replace(/ /g,"-")},checkIfIngredientExists:function(t){var e,s=Object(Rt["a"])(this.ourIngredients);try{for(s.s();!(e=s.n()).done;){var n=e.value;if(t==n.name)return!0}}catch(o){s.e(o)}finally{s.f()}return!1},submitIngredient:function(){var t=this,e={name:this.currentIngredient.name,img:this.currentIngredient.img,category:this.currentIngredient.category};console.log(e),""!=e.name&&void 0!=e.category&&tt.a.post(this.deploy_to+"ingredient/",e,{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(e){t.showSuccess("status "+e.status)})).catch((function(e){console.log(e),t.showErr(e)}))}},created:function(){var t=this;tt.a.get(this.deploy_to+"ingredient/",{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(e){t.ourIngredients=e.data.results})).catch((function(e){console.log(e),t.showErr(e)})),tt.a.get(this.deploy_to+"category/",{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(e){t.categories=e.data.results})).catch((function(e){console.log(e),t.showErr(e)}))}},Nt=Bt,Lt=s("adda"),qt=Object(p["a"])(Nt,jt,Et,!1,null,"7ba4aaf0",null),Ft=qt.exports;_()(qt,{VContainer:E["a"],VImg:Lt["a"]});var Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("form",{staticClass:"form-group",attrs:{autocomplete:"off"},on:{submit:t.addRecipe}},[s("label",{attrs:{for:"name"}},[t._v("Nome da receita:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Nome..."},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),s("br"),s("label",{attrs:{for:"cuisine"}},[t._v("Tipo de cozinha:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.cuisine,expression:"cuisine"}],staticClass:"form-control",attrs:{name:"cuisine",placeholder:"Cozinha..."},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.cuisine=e.target.multiple?s:s[0]}}},t._l(t.possilbe_cuisines,(function(e){return s("option",{key:e.name,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0),s("br"),s("label",{attrs:{for:"time"}},[t._v("Tempo:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],staticClass:"form-control",attrs:{type:"number",name:"time"},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}}),s("br"),s("label",{attrs:{for:"difficulty"}},[t._v("Dificuldade:")]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.difficulty,expression:"difficulty"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"difficulty1",name:"difficulty",value:"1"},domProps:{checked:t._q(t.difficulty,"1")},on:{change:function(e){t.difficulty="1"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"difficulty1"}},[t._v("Fácil")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.difficulty,expression:"difficulty"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"difficulty2",name:"difficulty",value:"2"},domProps:{checked:t._q(t.difficulty,"2")},on:{change:function(e){t.difficulty="2"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"difficulty2"}},[t._v("Médio")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.difficulty,expression:"difficulty"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"difficulty3",name:"difficulty",value:"3"},domProps:{checked:t._q(t.difficulty,"3")},on:{change:function(e){t.difficulty="3"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"difficulty3"}},[t._v("Difícil")])]),s("br"),s("label",{attrs:{for:"description"}},[t._v("Descrição da receita:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",name:"description",placeholder:"Descrição..."},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),s("br"),s("label",{attrs:{for:"serves"}},[t._v("Serve quantas pessoas:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.serves,expression:"serves"}],staticClass:"form-control",attrs:{type:"number",name:"serves"},domProps:{value:t.serves},on:{input:function(e){e.target.composing||(t.serves=e.target.value)}}}),s("br"),s("label",{attrs:{for:"image"}},[t._v("Imagem da receita:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.image,expression:"image"}],staticClass:"form-control",attrs:{type:"url",name:"image"},domProps:{value:t.image},on:{input:function(e){e.target.composing||(t.image=e.target.value)}}}),s("br"),s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.addStep()}}},[t._v("Adicionar mais um passo")]),s("br"),t._l(t.steps,(function(e){return s("div",{key:e.step+"-step"},[t._v(" "+t._s(e.step)+" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.instruction,expression:"step.instruction"}],staticClass:"form-control",attrs:{type:"text",name:"instruction",placeholder:"Instrução..."},domProps:{value:e.instruction},on:{input:function(s){s.target.composing||t.$set(e,"instruction",s.target.value)}}}),s("br")])})),0!=this.steps.length?s("button",{staticClass:"btn btn-danger formitem",attrs:{type:"button"},on:{click:function(e){return t.removeLastStep()}}},[t._v("Eliminar último passo ")]):t._e(),s("br"),s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.addIngredient()}}},[t._v("Adicionar mais um ingrediente")]),s("br"),s("v-container",{staticClass:"mx-20 my-5",attrs:{"align-center":""}},t._l(t.ingredients,(function(e){return s("v-row",{key:e.index,attrs:{"align-center":"","justify-space-around":""}},[s("v-col",{attrs:{cols:"2"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"ingredient.quantity"}],staticClass:"form-control custom-control-inline",attrs:{type:"number",name:"quantity"},domProps:{value:e.quantity},on:{input:function(s){s.target.composing||t.$set(e,"quantity",s.target.value)}}})]),s("v-col",{attrs:{cols:"4"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.measure,expression:"ingredient.measure"}],staticClass:"form-control custom-control-inline mx-1",attrs:{name:"ingredient"},on:{change:function(s){var n=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"measure",s.target.multiple?n:n[0])}}},t._l(t.possible_measures,(function(n){return s("option",{key:e.id+n.name,domProps:{value:n.id}},[t._v(" "+t._s(n.name)+" ")])})),0)]),s("v-col",{attrs:{cols:"4"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.id,expression:"ingredient.id"}],staticClass:"form-control custom-control-inline",attrs:{name:"ingredient"},on:{change:function(s){var n=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"id",s.target.multiple?n:n[0])}}},t._l(t.possible_ingredients,(function(n){return s("option",{key:e.id+n.name,domProps:{value:n.id}},[t._v(" "+t._s(n.name)+" ")])})),0)]),s("v-col",{attrs:{cols:"2"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.optional,expression:"ingredient.optional"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.optional)?t._i(e.optional,null)>-1:e.optional},on:{change:function(s){var n=e.optional,o=s.target,a=!!o.checked;if(Array.isArray(n)){var i=null,r=t._i(n,i);o.checked?r<0&&t.$set(e,"optional",n.concat([i])):r>-1&&t.$set(e,"optional",n.slice(0,r).concat(n.slice(r+1)))}else t.$set(e,"optional",a)}}}),s("label",{attrs:{for:"checkbox"}},[t._v("optional")])])],1)})),1),0!=this.ingredients.length?s("button",{staticClass:"btn btn-danger formitem",attrs:{type:"button"},on:{click:function(e){return t.removeLastIngredient()}}},[t._v("Eliminar último ingrediente ")]):t._e(),s("br"),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submeter")])],2)])},Ht=[],Ut=(s("a4d3"),s("e01a"),{name:"AddRecipe",data:function(){return{deploy_to:"https://projectpiteu.herokuapp.com/",id:"",name:"",cuisine:"",description:"",difficulty:"",time:"",serves:"",image:"",steps:[],ingredients:[],possible_ingredients:[],possible_measures:[],possilbe_cuisines:[]}},mounted:function(){var t=this,e=tt.a.get(this.deploy_to+"ingredient/"),s=tt.a.get(this.deploy_to+"measure/"),n=tt.a.get(this.deploy_to+"cuisine/");tt.a.all([e,s,n],{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then(tt.a.spread((function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];t.possible_ingredients=s[0].data.results,t.possible_measures=s[1].data.results,t.possilbe_cuisines=s[2].data.results}))).catch((function(t){console.log(t)}))},methods:{convertToWordArray:function(t){var e=[];for(var s in t)e.push(t[s].name);return e},addRecipe:function(t){t.preventDefault();var e={name:this.name,image:this.image,description:this.description,difficulty:this.difficulty,serves:this.serves,cuisine:this.cuisine,recipeIngredients:this.ingredients,instructions:this.steps};console.log(e),tt.a.post(this.deploy_to+"recipe/",e,{headers:{Authorization:"Token ".concat(this.$store.getters.getToken)}}).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},addStep:function(){var t={step:this.steps.length+1,instruction:""};this.steps.push(t)},removeLastStep:function(){this.steps.pop()},addIngredient:function(){var t={index:this.ingredients.length,id:"",measure:"",quantity:"",optional:!1};this.ingredients.push(t)},removeLastIngredient:function(){this.ingredients.pop()}}}),Jt=Ut,Wt=Object(p["a"])(Jt,Mt,Ht,!1,null,"6e75a2fa",null),Gt=Wt.exports;_()(Wt,{VCol:j["a"],VContainer:E["a"],VRow:N["a"]});var Kt=s("2f62");n["default"].use(Kt["a"]);var Qt=new Kt["a"].Store({state:{status:"",token:localStorage.getItem("token")||"",user:{}},mutations:{auth_request:function(t){t.status="loading"},auth_success:function(t,e,s){t.status="success",t.token=e,t.user=s},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token=""}},actions:{logout:function(t){var e=t.commit;return new Promise((function(t){e("logout"),localStorage.removeItem("token"),delete tt.a.defaults.headers.common["Authorization"],t()}))},login:function(t,e){var s=t.commit;return new Promise((function(t,n){s("auth_request"),e["username"]=e["email"],tt()({url:"https://projectpiteu.herokuapp.com/login/",data:e,method:"POST"}).then((function(e){var o=e.data.token,a=e.data.user;if(0==e.data.isUserAdmin)return n("Unauthorized"),void console.log("test");localStorage.setItem("token",o),tt.a.defaults.headers.common["Authorization"]=o,s("auth_success",o,a),t(e)})).catch((function(t){s("auth_error"),localStorage.removeItem("token"),n(t)}))}))}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status},getToken:function(t){return t.token},getTokenToSend:function(t){return"Token "+t.token}}}),Xt=s("5f5b"),Yt=s("b1e0"),Zt=(s("b15b"),s("f9e3"),s("2dd8"),s("ecee")),te=s("c074"),ee=s("ad3d");Zt["c"].add(te["a"]),n["default"].component("font-awesome-icon",ee["a"]),n["default"].use(Xt["a"]),n["default"].use(Yt["a"]),n["default"].use(c.a),n["default"].use(G["a"]),n["default"].config.productionTip=!1,n["default"].prototype.$http=tt.a;var se=localStorage.getItem("token");se&&(n["default"].prototype.$http.defaults.headers.common["Authorization"]=se);var ne=[{path:"/",name:"Home",component:ut,props:!0,meta:{requiresAuth:!0}},{path:"/recipes",name:"Recipes",component:ot,props:!0,meta:{requiresAuth:!0}},{path:"/exportData",name:"Export Data",component:vt,props:!0,meta:{requiresAuth:!0}},{path:"/validateRecipe",name:"Validate Recipe",component:wt,props:!0},{path:"/addRecipe",name:"Add Recipe",component:Gt,props:!0},{path:"/addIngredient",name:"Add Ingredient",component:Ft,props:!0},{path:"/ingredients",name:"Ingredients",component:Pt,props:!0,meta:{requiresAuth:!0}},{path:"/validateIngredient",name:"Validate Ingredient",component:Vt,props:!0},{path:"/login",name:"Login",component:M,props:!0}],oe=new G["a"]({routes:ne});new n["default"]({vuetify:Q,router:oe,store:Qt,render:function(t){return t(W)}}).$mount("#app")},"8a23":function(t,e,s){}});
//# sourceMappingURL=app.8ce2dc7f.js.map